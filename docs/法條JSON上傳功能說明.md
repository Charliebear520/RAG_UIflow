# 法條 JSON 上傳功能說明

## 功能概述

在 Upload 頁面中新增了專門的法條 JSON 文件上傳功能，讓已經轉換過法條的使用者可以直接上傳結構化的 JSON 文件，無需重複進行 PDF 轉換過程。

## 功能特點

### 1. 雙重上傳選項

- **PDF 法條文件上傳**：上傳 PDF 格式的法律文件，系統自動轉換為結構化 JSON
- **法條 JSON 文件上傳**：直接上傳已結構化的 JSON 文件，節省轉換時間

### 2. 清晰的用戶界面

- 分別的上傳區域，使用不同顏色和圖標區分
- 詳細的說明文字，幫助用戶理解功能用途
- 智能按鈕文字，根據文件類型顯示不同操作

### 3. 格式驗證

- 自動驗證 JSON 文件格式
- 檢查是否包含必需的`laws`字段
- 提供格式示例和說明

## 使用方法

### 上傳 PDF 文件

1. 在"PDF 法條文件上傳"區域選擇 PDF 文件
2. 配置 Metadata 選項（可選）
3. 點擊"轉換 PDF"按鈕
4. 等待系統自動轉換為結構化 JSON

### 上傳 JSON 文件

1. 在"法條 JSON 文件上傳"區域選擇 JSON 文件
2. 確保 JSON 文件包含正確的`laws`字段結構
3. 點擊"上傳法條 JSON"按鈕
4. 系統直接載入並預覽 JSON 內容

## JSON 文件格式要求

JSON 文件應包含以下結構：

```json
{
  "laws": [
    {
      "law_name": "法規名稱：著作權法",
      "chapters": [
        {
          "chapter": "第一章 總則",
          "sections": [
            {
              "section": "未分類節",
              "articles": [
                {
                  "article": "第1條",
                  "content": "條文內容...",
                  "items": [],
                  "metadata": {
                    "id": "唯一識別碼",
                    "spans": [...],
                    "page_range": {...}
                  }
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
```

## 技術實現

### 後端 API

- 端點：`POST /api/upload-json`
- 功能：驗證 JSON 格式，創建文檔記錄，生成文本內容
- 驗證：檢查`laws`字段存在性和 JSON 格式正確性

### 前端組件

- 分離的上傳區域，提供清晰的用戶體驗
- 智能文件類型檢測和按鈕狀態管理
- 實時預覽和錯誤處理

### 狀態管理

- 使用 ragStore 統一管理文檔狀態
- 支持 JSON 數據的編輯和保存
- 與現有的 PDF 轉換流程完全兼容

## 優勢

1. **節省時間**：已轉換用戶無需重複 PDF 轉換過程
2. **提高效率**：直接上傳 JSON 文件，立即進入分塊階段
3. **用戶友好**：清晰的界面設計，降低使用門檻
4. **格式靈活**：支持各種結構化的法條 JSON 格式
5. **完全兼容**：與現有 PDF 轉換流程無縫整合

## 使用場景

- 法律研究人員已有結構化法條數據
- 需要快速測試不同分塊策略
- 批量處理多個法條文件
- 與現有法律數據庫整合

這個功能大大提升了系統的實用性和用戶體驗，特別適合需要頻繁使用法條數據的專業用戶。
