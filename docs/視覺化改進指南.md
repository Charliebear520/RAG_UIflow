# RAG è©•æ¸¬ç³»çµ±è¦–è¦ºåŒ–æ”¹é€²æŒ‡å—

## ğŸ¯ å•é¡Œè§£æ±ºç‹€æ…‹

### âœ… å·²ä¿®å¾©çš„å•é¡Œ

1. **å°æ¯”åˆ†æé¡¯ç¤º 0 å€¼** - å¾Œç«¯æ•¸æ“šæ ¼å¼èˆ‡å‰ç«¯æœŸæœ›ä¸åŒ¹é…å·²ä¿®å¾©
2. **å°æ¯”åˆ†æçš„å¿…è¦æ€§** - ç¢ºèªæœ‰åƒ¹å€¼ï¼Œæä¾›é‡è¦é…ç½®å„ªåŒ–æ´å¯Ÿ

### ğŸ“Š å¯¦éš›æ•¸æ“šæ´å¯Ÿ

- **Chunk Size 300**: æœ€é«˜ Precision@5 (0.538)
- **Overlap Ratio 0.1**: æœ€ä½³å¹³è¡¡é»
- å°æ¯”åˆ†ææä¾›äº†é‡è¦çš„é…ç½®å„ªåŒ–æ´å¯Ÿ

## ğŸ“Š ç«‹å³å¯å¯¦ç¾çš„è¦–è¦ºåŒ–æ”¹é€²

### 1. æ”¹é€²å°æ¯”åˆ†æè¡¨æ ¼

```typescript
// æ·»åŠ é¡è‰²ç·¨ç¢¼å’Œè¶¨å‹¢æŒ‡ç¤º
const getPerformanceColor = (value: number, metric: string) => {
  if (metric === "precision") {
    return value > 0.4
      ? "text-green-600"
      : value > 0.2
      ? "text-yellow-600"
      : "text-red-600";
  }
  return value > 0.8
    ? "text-green-600"
    : value > 0.6
    ? "text-yellow-600"
    : "text-red-600";
};

const getTrendIcon = (value: number, metric: string) => {
  if (metric === "precision") {
    return value > 0.4 ? "â†—ï¸" : value > 0.2 ? "â†’" : "â†˜ï¸";
  }
  return value > 0.8 ? "â†—ï¸" : value > 0.6 ? "â†’" : "â†˜ï¸";
};
```

### 2. æ·»åŠ é…ç½®æ¨è–¦å¡ç‰‡

```typescript
const RecommendationCard = ({ bestConfig }) => (
  <div className="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
    <h3 className="text-lg font-semibold text-blue-800 mb-2">ğŸ¯ æ¨è–¦é…ç½®</h3>
    <div className="grid grid-cols-2 gap-4">
      <div>
        <span className="font-medium">Chunk Size:</span> {bestConfig.chunk_size}
      </div>
      <div>
        <span className="font-medium">Overlap Ratio:</span>{" "}
        {bestConfig.overlap_ratio}
      </div>
      <div className="col-span-2">
        <span className="font-medium">æ¨è–¦ç†ç”±:</span>
        æ­¤é…ç½®åœ¨Precisionå’ŒRecallä¹‹é–“æä¾›äº†æœ€ä½³å¹³è¡¡
      </div>
    </div>
  </div>
);
```

### 3. æ·»åŠ æŒ‡æ¨™è§£é‡‹å·¥å…·æç¤º

```typescript
const MetricTooltip = ({ metric, children }) => (
  <div className="relative group">
    {children}
    <div className="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-10">
      {getMetricExplanation(metric)}
    </div>
  </div>
);

const getMetricExplanation = (metric) => {
  const explanations = {
    precision_omega: "ç†æƒ³æƒ…æ³ä¸‹å¯é”åˆ°çš„æœ€å¤§ç²¾åº¦",
    precision_at_k: "å‰Kå€‹çµæœä¸­ç›¸é—œæ–‡æª”çš„æ¯”ä¾‹",
    recall_at_k: "ç›¸é—œæ–‡æª”ä¸­è¢«æª¢ç´¢åˆ°çš„æ¯”ä¾‹",
  };
  return explanations[metric] || "";
};
```

### 4. æ·»åŠ æ€§èƒ½æ‘˜è¦å¡ç‰‡

```typescript
const PerformanceSummary = ({ results }) => {
  const bestPrecision = Math.max(
    ...results.map((r) => r.metrics.precision_at_k[5])
  );
  const bestRecall = Math.max(...results.map((r) => r.metrics.recall_at_k[5]));

  return (
    <div className="grid grid-cols-3 gap-4 mb-6">
      <div className="bg-white border rounded-lg p-4 text-center">
        <div className="text-2xl font-bold text-green-600">
          {bestPrecision.toFixed(3)}
        </div>
        <div className="text-sm text-gray-600">æœ€ä½³ Precision@5</div>
      </div>
      <div className="bg-white border rounded-lg p-4 text-center">
        <div className="text-2xl font-bold text-blue-600">
          {bestRecall.toFixed(3)}
        </div>
        <div className="text-sm text-gray-600">æœ€ä½³ Recall@5</div>
      </div>
      <div className="bg-white border rounded-lg p-4 text-center">
        <div className="text-2xl font-bold text-purple-600">
          {results.length}
        </div>
        <div className="text-sm text-gray-600">æ¸¬è©¦é…ç½®æ•¸</div>
      </div>
    </div>
  );
};
```

## ğŸš€ é€²éšè¦–è¦ºåŒ–å»ºè­°

### 1. ç†±åŠ›åœ– (Heatmap)

```
Precision@5 vs Chunk Size & Overlap Ratio
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚         â”‚ 0.0  â”‚ 0.1  â”‚ 0.2  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ 300     â”‚ 0.42 â”‚ 0.59 â”‚ 0.53 â”‚
â”‚ 500     â”‚ 0.36 â”‚ 0.46 â”‚ 0.40 â”‚
â”‚ 800     â”‚ 0.33 â”‚ 0.40 â”‚ 0.37 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
```

### 2. ä½¿ç”¨ Chart.js æ·»åŠ åœ–è¡¨

```typescript
// å®‰è£: npm install chart.js react-chartjs-2
import { Bar, Radar } from "react-chartjs-2";

const PerformanceChart = ({ results }) => {
  const data = {
    labels: results.map(
      (r) => `${r.config.chunk_size}/${r.config.overlap_ratio}`
    ),
    datasets: [
      {
        label: "Precision@5",
        data: results.map((r) => r.metrics.precision_at_k[5]),
        backgroundColor: "rgba(54, 162, 235, 0.2)",
        borderColor: "rgba(54, 162, 235, 1)",
      },
      {
        label: "Recall@5",
        data: results.map((r) => r.metrics.recall_at_k[5]),
        backgroundColor: "rgba(255, 99, 132, 0.2)",
        borderColor: "rgba(255, 99, 132, 1)",
      },
    ],
  };

  return <Bar data={data} options={{ responsive: true }} />;
};
```

### 3. æ·»åŠ é…ç½®æ¯”è¼ƒå™¨

```typescript
const ConfigComparator = ({ configs, onSelect }) => (
  <div className="space-y-4">
    <h3 className="text-lg font-semibold">é…ç½®æ¯”è¼ƒ</h3>
    {configs.map((config, index) => (
      <div
        key={index}
        className="border rounded-lg p-4 cursor-pointer hover:bg-gray-50"
        onClick={() => onSelect(config)}
      >
        <div className="flex justify-between items-center">
          <div>
            <span className="font-medium">é…ç½® {index + 1}:</span>
            Chunk Size {config.chunk_size}, Overlap {config.overlap_ratio}
          </div>
          <div className="text-right">
            <div className="text-sm text-gray-600">
              P@5: {config.metrics.precision_at_k[5].toFixed(3)}
            </div>
            <div className="text-sm text-gray-600">
              R@5: {config.metrics.recall_at_k[5].toFixed(3)}
            </div>
          </div>
        </div>
      </div>
    ))}
  </div>
);
```

### 4. å…¶ä»–è¦–è¦ºåŒ–é¡å‹

#### é›·é”åœ– (Radar Chart)

- æ¯å€‹é…ç½®ç”¨ä¸€å€‹é›·é”åœ–
- è»¸ï¼šPrecision@1, Precision@3, Precision@5, Recall@5, Chunk Count, Avg Length

#### æ•£é»åœ–çŸ©é™£

- X è»¸ï¼šChunk Size
- Y è»¸ï¼šPrecision@5
- é¡è‰²ï¼šOverlap Ratio
- å¤§å°ï¼šRecall@5

#### å¹³è¡Œåæ¨™åœ–

- é¡¯ç¤ºå¤šç¶­åº¦é—œä¿‚
- è»¸ï¼šChunk Size â†’ Overlap â†’ Precision@5 â†’ Recall@5 â†’ Chunk Count

#### äº¤äº’å¼å„€è¡¨æ¿

- å¯ç¯©é¸çš„è¡¨æ ¼
- å¯æ’åºçš„æŒ‡æ¨™
- é»æ“ŠæŸ¥çœ‹è©³ç´°æª¢ç´¢çµæœ

## ğŸ“‹ å¯¦æ–½å„ªå…ˆç´š

### é«˜å„ªå…ˆç´šï¼ˆç«‹å³å¯å¯¦ç¾ï¼‰

1. âœ… ä¿®å¾©å°æ¯”åˆ†æé¡¯ç¤º 0 å€¼çš„å•é¡Œ
2. æ·»åŠ é¡è‰²ç·¨ç¢¼å’Œè¶¨å‹¢æŒ‡ç¤º
3. æ·»åŠ æŒ‡æ¨™è§£é‡‹å·¥å…·æç¤º
4. æ·»åŠ æ€§èƒ½æ‘˜è¦å¡ç‰‡

### ä¸­å„ªå…ˆç´šï¼ˆçŸ­æœŸå…§å¯¦ç¾ï¼‰

1. æ·»åŠ é…ç½®æ¨è–¦å¡ç‰‡
2. æ”¹é€²è¡¨æ ¼æ’åºå’Œç¯©é¸
3. æ·»åŠ é…ç½®æ¯”è¼ƒå™¨

### ä½å„ªå…ˆç´šï¼ˆé•·æœŸè¦åŠƒï¼‰

1. é›†æˆ Chart.js åœ–è¡¨
2. æ·»åŠ äº¤äº’å¼é›·é”åœ–
3. å¯¦ç¾é…ç½®å°å‡ºåŠŸèƒ½

## ğŸ›  æŠ€è¡“å¯¦ç¾å»ºè­°

### å‰ç«¯çµ„ä»¶æ”¹é€²

1. **Chart.js æˆ– D3.js** ç”¨æ–¼è¤‡é›œåœ–è¡¨
2. **React-Table** ç”¨æ–¼äº¤äº’å¼è¡¨æ ¼
3. **CSS Grid** ç”¨æ–¼éŸ¿æ‡‰å¼å¸ƒå±€

### æ•¸æ“šæ ¼å¼å„ªåŒ–

```json
{
  "visualization_data": {
    "heatmap_data": [...],
    "radar_data": [...],
    "scatter_data": [...],
    "summary_stats": {...}
  }
}
```

## ğŸ“ˆ å…·é«”æ”¹é€²é»

### 1. å°æ¯”åˆ†æè¡¨æ ¼

- æ·»åŠ è¶¨å‹¢ç®­é ­ (â†‘â†“â†’)
- é¡è‰²ç·¨ç¢¼ (ç¶ è‰²=å¥½, ç´…è‰²=å·®)
- æ’åºåŠŸèƒ½

### 2. é…ç½®æ¨è–¦

- åŸºæ–¼ç¶œåˆè©•åˆ†çš„æ™ºèƒ½æ¨è–¦
- è§£é‡‹æ¨è–¦ç†ç”±
- æä¾›å¤šå€‹é¸é …

### 3. æª¢ç´¢çµæœå¯è¦–åŒ–

- æŸ¥è©¢-æ–‡æª”ç›¸é—œæ€§åˆ†æ•¸æ¢å½¢åœ–
- æ–‡æª”å…§å®¹é è¦½
- é—œéµè©é«˜äº®

### 4. æ€§èƒ½æŒ‡æ¨™å„€è¡¨æ¿

- å¯¦æ™‚é€²åº¦æ¢
- é ä¼°å®Œæˆæ™‚é–“
- è³‡æºä½¿ç”¨æƒ…æ³
